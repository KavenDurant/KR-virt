# useTimeZone Hook

## ğŸ“‹ æ¦‚è¿°

`useTimeZone` æ˜¯ä¸€ä¸ªä¸“ä¸º KR-virt é¡¹ç›®å¼€å‘çš„è‡ªå®šä¹‰ React Hookï¼Œç”¨äºå¤„ç†æ—¶åŒºè½¬æ¢å’Œæ—¶é—´æ ¼å¼åŒ–ã€‚å®ƒèƒ½å¤Ÿå°†åç«¯è¿”å›çš„ ISO 8601 æ ¼å¼æ—¶é—´å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºç”¨æˆ·æœ¬åœ°æ—¶åŒºçš„æ—¶é—´ã€‚

## ğŸš€ ä¸»è¦åŠŸèƒ½

- âœ… **ISO 8601 æ—¶é—´è§£æ**ï¼šæ”¯æŒå„ç§ ISO æ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²
- âœ… **è‡ªåŠ¨æ—¶åŒºè½¬æ¢**ï¼šè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æœ¬åœ°æ—¶åŒºå¹¶è½¬æ¢
- âœ… **è‡ªå®šä¹‰æ ¼å¼è¾“å‡º**ï¼šæ”¯æŒçµæ´»çš„æ—¶é—´æ ¼å¼é…ç½®
- âœ… **å®Œå–„çš„é”™è¯¯å¤„ç†**ï¼šè¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º
- âœ… **æ‰¹é‡å¤„ç†æ”¯æŒ**ï¼š`useTimeZoneBatch` ç”¨äºå¤„ç†å¤šä¸ªæ—¶é—´
- âœ… **æ—¶åŒºä¿¡æ¯è·å–**ï¼š`useTimezoneInfo` è·å–å½“å‰ç”¨æˆ·æ—¶åŒºä¿¡æ¯
- âœ… **TypeScript æ”¯æŒ**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
src/hooks/
â”œâ”€â”€ useTimeZone.ts              # ä¸»è¦ Hook å®ç°
â”œâ”€â”€ __tests__/
â”‚   â””â”€â”€ useTimeZone.test.ts     # å•å…ƒæµ‹è¯•
â””â”€â”€ index.ts                    # å¯¼å‡ºé…ç½®
```

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```typescript
import { useTimeZone } from '@/hooks';

const MyComponent = ({ serverTime }: { serverTime: string }) => {
  const { localTime, isValid, error } = useTimeZone(serverTime);

  if (!isValid) {
    return <span>æ—¶é—´æ ¼å¼é”™è¯¯: {error}</span>;
  }

  return <span>æœ¬åœ°æ—¶é—´: {localTime}</span>;
};
```

### è‡ªå®šä¹‰æ ¼å¼

```typescript
const { localTime } = useTimeZone("2025-06-25T15:54:29+00:00", {
  format: "MM/DD/YYYY HH:mm",
});
// è¾“å‡º: 06/25/2025 23:54 (å‡è®¾ç”¨æˆ·åœ¨ UTC+8 æ—¶åŒº)
```

### æ‰¹é‡å¤„ç†

```typescript
const timeStrings = ["2025-06-25T15:54:29+00:00", "2025-06-26T10:30:00+08:00"];
const results = useTimeZoneBatch(timeStrings);
```

### è·å–æ—¶åŒºä¿¡æ¯

```typescript
const timezoneInfo = useTimezoneInfo();
console.log(timezoneInfo.timezone); // 'Asia/Shanghai'
console.log(timezoneInfo.offsetString); // '+08:00'
```

## ğŸ§ª æµ‹è¯•

Hook åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ä»¥ä¸‹åœºæ™¯ï¼š

- âœ… æ­£å¸¸æ—¶é—´è½¬æ¢
- âœ… è‡ªå®šä¹‰æ ¼å¼
- âœ… é”™è¯¯å¤„ç†
- âœ… è¾¹ç•Œæƒ…å†µ
- âœ… æ‰¹é‡å¤„ç†
- âœ… æ—¶åŒºä¿¡æ¯è·å–

è¿è¡Œæµ‹è¯•ï¼š

```bash
npm test src/hooks/__tests__/useTimeZone.test.ts
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è¯¦ç»†ä½¿ç”¨æŒ‡å—](../../../DOCS/useTimeZone-Hookä½¿ç”¨æŒ‡å—.md)
- [æ¼”ç¤ºé¡µé¢](../pages/TimeZoneDemo/index.tsx)
- [TimeDisplay ç»„ä»¶ç¤ºä¾‹](../components/TimeDisplay/index.tsx)

## ğŸ”— ä¾èµ–

- `dayjs` ^1.11.13
- `dayjs/plugin/utc`
- `dayjs/plugin/timezone`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ—¶åŒºæ’ä»¶**ï¼šHook ä¼šè‡ªåŠ¨åŠ è½½ Day.js çš„ UTC å’Œæ—¶åŒºæ’ä»¶
2. **æ€§èƒ½è€ƒè™‘**ï¼šä½¿ç”¨ `useMemo` ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—
3. **é”™è¯¯å¤„ç†**ï¼šå§‹ç»ˆæ£€æŸ¥ `isValid` å­—æ®µå¹¶å¤„ç†é”™è¯¯æƒ…å†µ
4. **è°ƒè¯•æ¨¡å¼**ï¼šå¯ä»¥å¯ç”¨ `debug` é€‰é¡¹æŸ¥çœ‹è¯¦ç»†çš„è½¬æ¢è¿‡ç¨‹

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- ç”¨æˆ·ç®¡ç†é¡µé¢çš„åˆ›å»ºæ—¶é—´æ˜¾ç¤º
- é›†ç¾¤ç®¡ç†é¡µé¢çš„èŠ‚ç‚¹çŠ¶æ€æ—¶é—´
- ç³»ç»Ÿè®¾ç½®é¡µé¢çš„è®¸å¯è¯åˆ°æœŸæ—¶é—´
- å®¡è®¡æ—¥å¿—çš„æ—¶é—´æˆ³æ˜¾ç¤º
- ä»»ä½•éœ€è¦æ˜¾ç¤ºæœåŠ¡å™¨æ—¶é—´çš„åœºæ™¯

---

_æ­¤ Hook ä¸“ä¸º KR-virt é¡¹ç›®è®¾è®¡ï¼Œç¡®ä¿äº†æ—¶é—´æ˜¾ç¤ºçš„ä¸€è‡´æ€§å’Œç”¨æˆ·ä½“éªŒã€‚_
